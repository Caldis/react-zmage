!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-zmage"]=t():e["react-zmage"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}({"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Background/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".backgroundLayer__2zBDq{position:absolute;top:0;left:0;right:0;bottom:0;cursor:-webkit-zoom-out;cursor:zoom-out;background-color:#fff;-webkit-transition:opacity .2s .33s;transition:opacity .2s .33s;will-change:opacity}",""]),t.locals={backgroundLayer:"backgroundLayer__2zBDq"}},"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Control/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".controls__2sOYg{position:absolute;padding:20px;top:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex;z-index:1000}.controlButton__2jUoU,.controls__2sOYg{-webkit-box-sizing:border-box;box-sizing:border-box}.controlButton__2jUoU{margin:7px;width:26px;height:26px;cursor:pointer;-webkit-transform:scale(1);transform:scale(1);-webkit-transition:-webkit-transform .2s;transition:-webkit-transform .2s;transition:transform .2s;transition:transform .2s,-webkit-transform .2s}.controlButton__2jUoU:hover{-webkit-transform:scale(1.1)!important;transform:scale(1.1)!important}.controlButton__2jUoU:active{-webkit-transform:scale(1)!important;transform:scale(1)!important}.rotateLeft__Us1Hk,.rotateRight__380IV{margin:7px 5px}.zoomButton__3EA_v{border:2.5px solid #000}.closeButton__1hkr- .crossLine__3lngH{position:absolute;top:12px;left:-3px;width:32px;height:2.5px;background-color:#000;-webkit-transform-origin:50%;transform-origin:50%}.pages__1SqZ9{-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;left:50%;bottom:0;z-index:110;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.pages__1SqZ9 .blackDot__1c8XI{background:#000}.pages__1SqZ9 .blackDot__1c8XI,.pages__1SqZ9 .whiteDot__WV_HE{cursor:pointer;margin:10px 4px;display:block;width:8px;height:8px;border-radius:4px}.pages__1SqZ9 .whiteDot__WV_HE{background:#999}",""]),t.locals={controls:"controls__2sOYg",controlButton:"controlButton__2jUoU",rotateLeft:"rotateLeft__Us1Hk controlButton__2jUoU",rotateRight:"rotateRight__380IV controlButton__2jUoU",zoomButton:"zoomButton__3EA_v controlButton__2jUoU",closeButton:"closeButton__1hkr- controlButton__2jUoU",crossLine:"crossLine__3lngH",pages:"pages__1SqZ9",blackDot:"blackDot__1c8XI",whiteDot:"whiteDot__WV_HE"}},"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Image/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".loadingContainer__1uRry{position:absolute;left:50%;top:50%;-webkit-animation:fadeIn__3hud5 1s linear forwards;animation:fadeIn__3hud5 1s linear forwards}.loadingContainer__1uRry .loading__2ybtF{border:3px solid #f3f3f3;border-top:3px solid #000;border-radius:50%;width:30px;height:30px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-animation:spin__34aiz 1s linear infinite;animation:spin__34aiz 1s linear infinite}@-webkit-keyframes fadeIn__3hud5{0%{opacity:0}50%{opacity:0}to{opacity:1}}@keyframes fadeIn__3hud5{0%{opacity:0}50%{opacity:0}to{opacity:1}}@-webkit-keyframes spin__34aiz{0%{-webkit-transform:translate(-50%,-50%) rotate(0deg);transform:translate(-50%,-50%) rotate(0deg)}to{-webkit-transform:translate(-50%,-50%) rotate(1turn);transform:translate(-50%,-50%) rotate(1turn)}}@keyframes spin__34aiz{0%{-webkit-transform:translate(-50%,-50%) rotate(0deg);transform:translate(-50%,-50%) rotate(0deg)}to{-webkit-transform:translate(-50%,-50%) rotate(1turn);transform:translate(-50%,-50%) rotate(1turn)}}.imageLayer__1CUlw{position:absolute;left:50%;top:50%;z-index:10;border-radius:5px;will-change:transform}",""]),t.locals={loadingContainer:"loadingContainer__1uRry",fadeIn:"fadeIn__3hud5",loading:"loading__2ybtF",spin:"spin__34aiz",imageLayer:"imageLayer__1CUlw"}},"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Wrapper/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".wrapperLayer__12HA6{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999}",""]),t.locals={wrapperLayer:"wrapperLayer__12HA6"}},"./node_modules/css-loader/lib/css-base.js":function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o=function(e,t){var o=e[1]||"",n=e[3];if(!n)return o;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n),a=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[o].concat(a).concat([r]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o}).join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var a=this[r][0];"number"==typeof a&&(n[a]=!0)}for(r=0;r<e.length;r++){var i=e[r];"number"==typeof i[0]&&n[i[0]]||(o&&!i[2]?i[2]=o:o&&(i[2]="("+i[2]+") and ("+o+")"),t.push(i))}},t}},"./node_modules/style-loader/lib/addStyles.js":function(e,t,o){var n={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),a=function(e){var t={};return function(e){if(void 0===t[e]){var o=function(e){return document.querySelector(e)}.call(this,e);if(o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),i=null,s=0,l=[],c=o("./node_modules/style-loader/lib/urls.js");function u(e,t){for(var o=0;o<e.length;o++){var r=e[o],a=n[r.id];if(a){a.refs++;for(var i=0;i<a.parts.length;i++)a.parts[i](r.parts[i]);for(;i<r.parts.length;i++)a.parts.push(g(r.parts[i],t))}else{var s=[];for(i=0;i<r.parts.length;i++)s.push(g(r.parts[i],t));n[r.id]={id:r.id,refs:1,parts:s}}}}function d(e,t){for(var o=[],n={},r=0;r<e.length;r++){var a=e[r],i=t.base?a[0]+t.base:a[0],s={css:a[1],media:a[2],sourceMap:a[3]};n[i]?n[i].parts.push(s):o.push(n[i]={id:i,parts:[s]})}return o}function f(e,t){var o=a(e.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?o.insertBefore(t,n.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),l.push(t);else if("bottom"===e.insertAt)o.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=a(e.insertInto+" "+e.insertAt.before);o.insertBefore(t,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),f(e,t),t}function h(e,t){Object.keys(t).forEach(function(o){e.setAttribute(o,t[o])})}function g(e,t){var o,n,r,a;if(t.transform&&e.css){if(!(a=t.transform(e.css)))return function(){};e.css=a}if(t.singleton){var l=s++;o=i||(i=m(t)),n=b.bind(null,o,l,!1),r=b.bind(null,o,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),f(e,t),t}(t),n=function(e,t,o){var n=o.css,r=o.sourceMap,a=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||a)&&(n=c(n));r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var i=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}.bind(null,o,t),r=function(){p(o),o.href&&URL.revokeObjectURL(o.href)}):(o=m(t),n=function(e,t){var o=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}.bind(null,o),r=function(){p(o)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var o=d(e,t);return u(o,t),function(e){for(var r=[],a=0;a<o.length;a++){var i=o[a];(s=n[i.id]).refs--,r.push(s)}e&&u(d(e,t),t);for(a=0;a<r.length;a++){var s;if(0===(s=r[a]).refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete n[s.id]}}}};var y=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}();function b(e,t,o,n){var r=o?"":n.css;if(e.styleSheet)e.styleSheet.cssText=y(t,r);else{var a=document.createTextNode(r),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(a,i[t]):e.appendChild(a)}}},"./node_modules/style-loader/lib/urls.js":function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var o=t.protocol+"//"+t.host,n=o+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,a=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(a)?e:(r=0===a.indexOf("//")?a:0===a.indexOf("/")?o+a:n+a.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},"./src/components/Background/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(o("react")),r=a(o("./src/components/Background/index.less"));function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.show,o=e.zoom,a=e.backdrop,i=e.unmountSelf,s=e.toggleZoom;return n.default.createElement("div",{className:r.default.backgroundLayer,onClick:o?s:i,style:{opacity:t?1:0,background:a||""}})}},"./src/components/Background/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Background/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/components/Control/icon.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RotateRight=t.RotateLeft=void 0;var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(o("react"));function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,r.default.PureComponent),n(t,[{key:"render",value:function(){return r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 28 28"},r.default.createElement("path",{d:"M15.4,4.5V0L8.7,6.7l6.7,6.6V7.5c4.2,0.7,7.4,4.3,7.4,8.7s-3.2,8-7.4,8.7v3c5.8-0.7,10.4-5.7,10.4-11.7S21.3,5.3,15.4,4.5 M6.7,25.6c1.7,1.3,3.7,2.1,5.8,2.4v-3c-1.3-0.2-2.5-0.7-3.6-1.5L6.7,25.6 M5.2,17.7h-3c0.3,2.1,1.1,4,2.4,5.8l2.1-2.1 C5.9,20.3,5.4,19.1,5.2,17.7 M6.7,11.1L4.6,9c-1.3,1.7-2.2,3.7-2.4,5.8h3C5.4,13.5,5.9,12.2,6.7,11.1z"}))}}]),t}(),c=function(e){function t(){return a(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,r.default.PureComponent),n(t,[{key:"render",value:function(){return r.default.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 200 200"},r.default.createElement("path",{d:"M137.6,47.6L89.9,0v32.8C48.7,38.1,15.9,73,15.9,116.4s32.8,78.3,74.1,83.6v-21.2C60.3,173.5,37,148.1,37,116.4 S60.3,59.3,89.9,54v41.3C89.9,95.2,137.6,47.6,137.6,47.6z M184.1,105.8c-2.1-14.8-7.4-28.6-16.9-41.3l-14.8,14.8 c5.3,8.5,9.5,16.9,10.6,26.5H184.1z M111.1,178.8V200c14.8-2.1,28.6-7.4,41.3-16.9l-14.8-14.8C129.1,173.5,120.6,177.8,111.1,178.8 L111.1,178.8z M152.4,153.4l14.8,14.8c9.5-12.7,15.9-26.5,16.9-41.3H163C161.9,136.5,157.7,145,152.4,153.4z"}))}}]),t}();t.RotateLeft=l,t.RotateRight=c},"./src/components/Control/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o("react"),a=u(r),i=o("react-motion"),s=u(o("./src/components/Control/index.less")),l=o("./src/components/Control/icon.js"),c=o("./src/utils/index.js");function u(e){return e&&e.__esModule?e:{default:e}}var d={over:20,rotate:45,opacity:0},f={over:0,rotate:0,opacity:1},p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={motionStyle:d},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),n(t,[{key:"render",value:function(){var e=this.props,t=e.zoom,o=e.page,n=e.set,u=e.mobile,d=e.controller,f=e.unmountSelf,p=e.toggleRotate,m=e.toggleZoom,h=e.jumpPages,g=this.state.motionStyle;return a.default.createElement(i.Motion,{style:(0,c.springlization)({over:g.over,rotate:g.rotate,opacity:g.opacity})},function(e){var i=e.over,c=e.rotate,g=e.opacity;return a.default.createElement(r.Fragment,null,a.default.createElement("div",{className:s.default.controls},!t&&d.rotate&&a.default.createElement("div",{className:s.default.rotateLeft,onClick:p("left"),style:{opacity:g,transform:"rotate("+c+"deg)"}},a.default.createElement(l.RotateLeft,null)),!t&&d.rotate&&a.default.createElement("div",{className:s.default.rotateRight,onClick:p("right"),style:{opacity:g,transform:"rotate("+-c+"deg)"}},a.default.createElement(l.RotateRight,null)),!t&&d.zoom&&a.default.createElement("div",{className:s.default.zoomButton,onClick:u?function(){return window.open(n[o].src)}:m,style:{opacity:g,transform:"rotate("+c+"deg)"}}),!t&&d.close&&a.default.createElement("div",{className:s.default.closeButton,onClick:t?m:f},a.default.createElement("div",{className:s.default.crossLine,style:{opacity:g,transform:"rotate("+(45-c)+"deg)"}}),a.default.createElement("div",{className:s.default.crossLine,style:{opacity:g,transform:"rotate("+-(45-c)+"deg)"}}))),n.length>1&&!t&&d.pagination&&a.default.createElement("div",{className:s.default.pages,style:{opacity:g,transform:"translate3d(-50%, "+i+"px, 0)"}},n.map(function(e,t){return t===o?a.default.createElement("span",{key:t,className:s.default.blackDot}):a.default.createElement("span",{key:t,className:s.default.whiteDot,onClick:function(){return h(t)}})})))})}}],[{key:"getDerivedStateFromProps",value:function(e){return{motionStyle:e.show?f:d}}}]),t}();t.default=p},"./src/components/Control/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Control/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/components/Image/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o("react"),a=c(r),i=o("react-motion"),s=c(o("./src/components/Image/index.less")),l=o("./src/utils/index.js");o("./src/config/default.js");function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));d.call(o),o.imageRef=a.default.createRef(),o.initialPageOffset=window.pageYOffset,o.listeningMouseMove=!1;var n=t.getCoverStyle(e),r=n.x,i=n.y,s=n.opacity,l=n.scale,c=n.rotate,u=n.borderRadius;return o.state={defaultStyle:{x:r,y:i,opacity:s,scale:l,rotate:c,borderRadius:u},currentStyle:{x:r,y:i,opacity:s,scale:l,rotate:c,borderRadius:u}},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),n(t,[{key:"componentDidMount",value:function(){(0,l.addListenEventOf)("resize",this.handleResize)}},{key:"componentDidUpdate",value:function(e,t,o){var n=e.show,r=e.zoom,a=e.rotate,i=this.props,s=i.show,l=i.zoom,c=i.rotate;n===s&&r===l&&a===c||(n?this.updateImageStyle():setTimeout(this.updateImageStyle,50),this.updateZoomEventListenerWithState())}},{key:"componentWillUnmount",value:function(){(0,l.removeListenEventOf)("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.props,o=t.show,n=t.zoom,c=t.page,u=t.set,d=t.cover,f=t.toggleZoom,p=this.state,m=p.defaultStyle,h=p.currentStyle;return a.default.createElement(r.Fragment,null,o&&a.default.createElement("div",{className:s.default.loadingContainer},a.default.createElement("div",{className:s.default.loading})),a.default.createElement(i.Motion,{defaultStyle:m,style:(0,l.springlization)({x:h.x,y:h.y,rotate:h.rotate})},function(t){var r=t.x,p=t.y,g=t.rotate;return a.default.createElement(i.Motion,{defaultStyle:m,style:(0,l.springlization)({scale:h.scale},.025),onRest:e.handleMotionRest},function(t){var i=t.scale,l=o?0:e.initialPageOffset-window.pageYOffset;return a.default.createElement("img",{key:c+"-"+u[c].src,className:s.default.imageLayer,style:{transform:"translate3d(-50%, -50%, 0) translate3d("+r+"px, "+p+"px, 0px) translate3d(0px, "+l+"px, 0px) scale3d("+i+", "+i+", 1) rotate3d(0, 0, 1, "+g+"deg)",cursor:n?"zoom-out":"initial"},src:u[c].src,alt:u[c].alt,ref:e.imageRef,onLoad:function(){return u[c].src!==d.getAttribute("src")&&e.updateImageStyle()},onClick:n?f:function(){},onError:function(){console.warn("react-zmage initialization error because the cover image url invalid."),e.handleMotionRest(!0)}})})}))}}]),t}();u.getImageStyle=function(e,t){var o=e.show,n=e.zoom;return o?n?u.getZoomingStyle(void 0,e,t):u.getBrowsingStyle(e,t):u.getCoverStyle(e)},u.getCoverStyle=function(e){var t=e.page,o=e.cover,n=e.rotate,r=o.naturalWidth,a=o.getBoundingClientRect(),i=a.top,s=a.left,c=a.width,u=a.height,d=window.getComputedStyle(o),f=d.opacity,p=d.borderRadius;return 0===t?{x:-(0,l.scrollWidth)()/2+s+c/2,y:-(0,l.windowHeight)()/2+i+u/2,opacity:parseInt(f)||1,scale:c/r,rotate:n-n%360,borderRadius:parseInt(p)||0}:{x:0,y:-(0,l.windowHeight)(),opacity:0,scale:c/r,rotate:n-n%360,borderRadius:parseInt(p)||0}},u.getBrowsingStyle=function(e,t){var o=e.margin,n=e.rotate,r=t.current,a=r.naturalWidth,i=r.naturalHeight;return{x:0,y:0,opacity:1,scale:(0,l.calcFitScale)(a,i,o),rotate:n,borderRadius:10}},u.getZoomingStyle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.clientX,o=void 0===t?(0,l.scrollWidth)()/2:t,n=e.clientY,r=void 0===n?(0,l.windowHeight)()/2:n,a=arguments[1],i=arguments[2],s=a.margin,c=a.rotate,u=i.current,d=u.naturalWidth,f=u.naturalHeight,p=(0,l.scrollWidth)(),m=(0,l.windowHeight)(),h=d-(0,l.scrollWidth)()+2*s,g=f-(0,l.windowHeight)()+2*s;return{x:d>p?(d-p)/2+s-h*(o/p):0,y:f>m?(f-m)/2+s-g*(r/m):0,opacity:1,scale:1,rotate:c,borderRadius:20}},u.mergeStyle=function(e,t){var o=t.x,n=void 0===o?e.x:o,r=t.y,a=void 0===r?e.y:r,i=t.opacity,s=void 0===i?e.opacity:i,l=t.scale,c=void 0===l?e.opacity:l,u=t.rotate,d=void 0===u?e.rotate:u,f=t.borderRadius;return{x:n,y:a,opacity:s,scale:c,rotate:d,borderRadius:void 0===f?e.borderRadius:f}};var d=function(){var e=this;this.updateImageStyle=function(){var t=u.getImageStyle(e.props,e.imageRef);e.setStyle(t)},this.updateZoomEventListenerWithState=function(){var t=e.props,o=t.show,n=t.zoom;o&&n&&!e.listeningMouseMove?((0,l.addListenEventOf)("mousemove",e.handleMouseMove),e.listeningMouseMove=!0):((0,l.removeListenEventOf)("mousemove",e.handleMouseMove),e.listeningMouseMove=!1)},this.handleMouseMove=function(t){var o=u.getZoomingStyle(t,e.props,e.imageRef);e.setStyle(o)},this.handleResize=function(t){e.updateImageStyle()},this.handleMotionRest=function(t){var o=e.props,n=o.cover,r=o.remove;e.props.show&&!t||(n.style.visibility="visible",r())},this.setStyle=function(t){var o=u.mergeStyle(e.state.currentStyle,t);e.setState({loading:!1,currentStyle:o})}};t.default=u},"./src/components/Image/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Image/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/components/Portals/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=s(o("react")),a=s(o("react-dom")),i=o("./src/config/default.js");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.target=e.target||document.body,o.element=document.createElement("div"),o.element.id="zmage",o.element.style.zIndex=e.zIndex,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),n(t,[{key:"componentDidMount",value:function(){this.target.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){this.target.removeChild(this.element)}},{key:"render",value:function(){return a.default.createPortal(this.props.children,this.element)}}]),t}();t.default=l,l.defaultProps={zIndex:i.defProp.zIndex},l.propTypes={zIndex:i.defType.zIndex}},"./src/components/Wrapper/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=f(o("react")),a=f(o("prop-types")),i=f(o("./src/components/Wrapper/index.less")),s=f(o("./src/components/Control/index.js")),l=f(o("./src/components/Image/index.js")),c=f(o("./src/components/Background/index.js")),u=o("./src/config/default.js"),d=o("./src/utils/index.js");function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.mountSelf=function(){var e=o.props.cover;o.setState({show:!0},function(){e.style.visibility="hidden",(0,d.addListenEventOf)("scroll",o.handleScroll),(0,d.addListenEventOf)("keydown",o.handleKeyDown),(0,d.addListenEventOf)("touchmove",o.handleScroll)})},o.unmountSelf=function(){var e=o.props.cover;0!==o.state.page&&(e.style.visibility="visible"),o.setState({show:!1})},o.handleKeyDown=function(e){e.preventDefault();var t=o.props,n=t.set,r=t.hotKey,a=o.state.zoom,i=n&&n.constructor===Array,s=o.handleSwitchPages("prev"),l=o.handleSwitchPages("next");switch(e.key){case"ArrowLeft":!a&&r.flip&&i&&s();break;case"ArrowRight":!a&&r.flip&&i&&l();break;case" ":r.zoom&&o.handleToggleZoom();break;case"Escape":r.close&&(a?o.handleToggleZoom():o.unmountSelf());break;default:return}},o.handleScroll=function(){o.state.show&&o.unmountSelf()},o.handleJumpPages=function(e){o.setState({page:e})},o.handleSwitchPages=function(e){return function(){var t=o.props.set,n=o.state.page;o.setState({page:"prev"===e?Math.abs(t.length+n-1)%t.length:(n+1)%t.length})}},o.handleToggleRotate=function(e){switch(e){case"left":return function(){return o.setState({rotate:o.state.rotate-90})};case"right":return function(){return o.setState({rotate:o.state.rotate+90})};default:return function(){return o.setState({rotate:0})}}},o.handleToggleZoom=function(){o.setState({zoom:!o.state.zoom})};var n=(0,d.mobileCheck)();return o.state={show:!1,zoom:!1,page:0,rotate:0,mobile:n,margin:n?0:e.margin},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),n(t,[{key:"componentDidMount",value:function(){this.mountSelf()}},{key:"componentWillUnmount",value:function(){(0,d.removeListenEventOf)("scroll",this.handleScroll),(0,d.removeListenEventOf)("keydown",this.handleKeyDown),(0,d.removeListenEventOf)("touchmove",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.cover,o=e.set,n=e.controller,a=e.backdrop,u=e.remove,d=this.state,f=d.show,p=d.zoom,m=d.page,h=d.rotate,g=d.mobile,y=d.margin;return r.default.createElement("div",{className:i.default.wrapperLayer},r.default.createElement(c.default,{show:f,zoom:p,backdrop:a,unmountSelf:this.unmountSelf,toggleZoom:this.handleToggleZoom}),r.default.createElement(s.default,{set:o,show:f,zoom:p,page:m,mobile:g,controller:n,unmountSelf:this.unmountSelf,jumpPages:this.handleJumpPages,toggleRotate:this.handleToggleRotate,toggleZoom:this.handleToggleZoom}),r.default.createElement(l.default,{set:o,show:f,zoom:p,page:m,cover:t,rotate:h,mobile:g,remove:u,margin:y,toggleZoom:this.handleToggleZoom}))}}]),t}();t.default=p,p.defaultProps={cover:{},set:[],controller:u.defProp.controller,hotKey:u.defProp.hotKey,backdrop:u.defProp.backdrop,margin:u.defProp.margin,remove:function(){}},p.propTypes={cover:a.default.object,set:u.defType.set,controller:u.defType.controller,hotKey:u.defType.hotKey,backdrop:u.defType.backdrop,margin:u.defType.margin,remove:a.default.func}},"./src/components/Wrapper/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Wrapper/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/config/default.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defType=t.defProp=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(o("prop-types"));t.defProp={controller:{pagination:!0,title:!0,rotate:!0,zoom:!0,close:!0,flip:!0},hotKey:{zoom:!0,close:!0,flip:!0},backdrop:"#FFFFFF",zIndex:1e3,margin:70,springOption:{stiffness:230,damping:25,precision:.01},getSpringOption:function(e){return{stiffness:230,damping:25,precision:e}}},t.defType={set:n.default.oneOfType([n.default.arrayOf(n.default.shape({src:n.default.string,alt:n.default.string,text:n.default.string})),n.default.shape({src:n.default.string,alt:n.default.string,text:n.default.string})]),controller:n.default.shape({pagination:n.default.bool,title:n.default.bool,rotate:n.default.bool,zoom:n.default.bool,close:n.default.bool,flip:n.default.bool}),hotKey:n.default.shape({zoom:n.default.bool,close:n.default.bool,flip:n.default.bool}),backdrop:n.default.string,zIndex:n.default.number,margin:n.default.number,springOption:n.default.shape({stiffness:n.default.number,damping:n.default.number})}},"./src/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=o("react"),i=d(a),s=d(o("prop-types")),l=d(o("./src/components/Portals/index.js")),c=d(o("./src/components/Wrapper/index.js")),u=o("./src/config/default.js");function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return p.call(o),o.cover=i.default.createRef(),o.state={browsing:!1,set:t.buildSet(e)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default.PureComponent),r(t,[{key:"render",value:function(){var e=this,t=this.state,o=t.browsing,r=t.set,s=this.props,d=s.className,f=s.src,p=s.alt,m=s.controller,h=s.hotKey,g=s.backdrop,y=s.zIndex,b=s.style,v=function(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(s,["className","src","alt","controller","hotKey","backdrop","zIndex","style"]);return i.default.createElement(a.Fragment,null,i.default.createElement("img",n({ref:function(t){return e.cover=t},className:d,src:f,alt:p,title:p,style:n({cursor:"zoom-in"},b),onClick:this.browsing},v)),o&&i.default.createElement(l.default,{zIndex:y},i.default.createElement(c.default,{set:r,cover:this.cover,controller:n({},u.defProp.controller,m),hotKey:n({},u.defProp.hotKey,h),backdrop:g,remove:this.unBrowsing})))}}],[{key:"getDerivedStateFromProps",value:function(e){return{set:t.buildSet(e)}}}]),t}();f.buildSet=function(e){var t=e.set,o=e.src,n=e.alt,r=e.txt;return Array.isArray(t)&&t.length>1?t:[{src:o,alt:n,txt:r}]};var p=function(){var e=this;this.browsing=function(){var t=e.props.onClick;t&&t.constructor===Function&&t(),e.setState({browsing:!0})},this.unBrowsing=function(){e.setState({browsing:!1})}};t.default=f,f.defaultProps={src:"",alt:"",txt:"",set:[],controller:u.defProp.controller,hotKey:u.defProp.hotKey,backdrop:u.defProp.backdrop,zIndex:u.defProp.zIndex},f.propTypes={src:s.default.string.isRequired,alt:s.default.string,txt:s.default.string,set:u.defType.set,controller:u.defType.controller,hotKey:u.defType.hotKey,backdrop:u.defType.backdrop,zIndex:u.defType.zIndex}},"./src/utils/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.springlization=t.mobileCheck=t.clientHeight=t.scrollHeight=t.windowHeight=t.clientWidth=t.scrollWidth=t.windowWidth=t.removeListenEventOf=t.addListenEventOf=t.calcFitScale=void 0;var n=o("./src/config/default.js"),r=o("react-motion"),a=(t.calcFitScale=function(e,t,o){var n=a()/(e+2*o),r=i()/(t+2*o);return Math.min(n,r)},t.addListenEventOf=function(e,t){return window.addEventListener(e,t)},t.removeListenEventOf=function(e,t){return window.removeEventListener(e,t)},t.windowWidth=function(){return window.innerWidth},t.scrollWidth=function(){return document.body.scrollWidth},t.clientWidth=function(){return document.documentElement.clientWidth}),i=(t.windowHeight=function(){return window.innerHeight},t.scrollHeight=function(){return document.body.scrollHeight},t.clientHeight=function(){return document.documentElement.clientHeight});t.mobileCheck=function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},t.springlization=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,o={};for(var a in e)o[a]=(0,r.spring)(e[a],n.defProp.getSpringOption(t));return o}},0:function(e,t,o){e.exports=o("./src/index.js")},"prop-types":function(e,t){e.exports=require("prop-types")},react:function(e,t){e.exports=require("react")},"react-dom":function(e,t){e.exports=require("react-dom")},"react-motion":function(e,t){e.exports=require("react-motion")}})});