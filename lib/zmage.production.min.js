!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["react-zmage"]=t():e["react-zmage"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}({"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Background/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".backgroundLayer__2zBDq{position:absolute;top:0;left:0;right:0;bottom:0;cursor:-webkit-zoom-out;cursor:zoom-out;background-color:#fff;-webkit-transition:opacity .2s .33s;transition:opacity .2s .33s;will-change:opacity}",""]),t.locals={backgroundLayer:"backgroundLayer__2zBDq"}},"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Control/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".controls__2sOYg{position:absolute;padding:20px;top:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex}.controls__2sOYg,.zoomButton__3EA_v{-webkit-box-sizing:border-box;box-sizing:border-box}.zoomButton__3EA_v{margin:7px;width:26px;height:26px;cursor:pointer;border:1px solid #000}.zoomButton__3EA_v:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}.closeButton__1hkr-,.zoomButton__3EA_v:active{-webkit-transform:scale(1);transform:scale(1)}.closeButton__1hkr-{width:40px;height:40px;cursor:pointer}.closeButton__1hkr- .crossLine__3lngH{position:absolute;top:50%;left:3px;width:35px;height:1px;background-color:#000;-webkit-transform-origin:50%;transform-origin:50%}.closeButton__1hkr-:hover{-webkit-transform:scale(1.1);transform:scale(1.1)}.closeButton__1hkr-:active{-webkit-transform:scale(1);transform:scale(1)}.pages__1SqZ9{-webkit-box-sizing:border-box;box-sizing:border-box;display:-webkit-box;display:-ms-flexbox;display:flex;position:absolute;left:50%;bottom:0;z-index:110;-webkit-transform:translateX(-50%);transform:translateX(-50%)}.pages__1SqZ9 .blackDot__1c8XI{background:#000}.pages__1SqZ9 .blackDot__1c8XI,.pages__1SqZ9 .whiteDot__WV_HE{cursor:pointer;margin:10px 4px;display:block;width:8px;height:8px;border-radius:4px}.pages__1SqZ9 .whiteDot__WV_HE{background:#999}",""]),t.locals={controls:"controls__2sOYg",zoomButton:"zoomButton__3EA_v",closeButton:"closeButton__1hkr-",crossLine:"crossLine__3lngH",pages:"pages__1SqZ9",blackDot:"blackDot__1c8XI",whiteDot:"whiteDot__WV_HE"}},"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Image/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".loadingContainer__1uRry{position:absolute;left:50%;top:50%;-webkit-animation:fadeIn__3hud5 1s linear forwards;animation:fadeIn__3hud5 1s linear forwards}.loadingContainer__1uRry .loading__2ybtF{border:3px solid #f3f3f3;border-top:3px solid #000;border-radius:50%;width:30px;height:30px;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-animation:spin__34aiz 1s linear infinite;animation:spin__34aiz 1s linear infinite}@-webkit-keyframes fadeIn__3hud5{0%{opacity:0}50%{opacity:0}to{opacity:1}}@keyframes fadeIn__3hud5{0%{opacity:0}50%{opacity:0}to{opacity:1}}@-webkit-keyframes spin__34aiz{0%{-webkit-transform:translate(-50%,-50%) rotate(0deg);transform:translate(-50%,-50%) rotate(0deg)}to{-webkit-transform:translate(-50%,-50%) rotate(1turn);transform:translate(-50%,-50%) rotate(1turn)}}@keyframes spin__34aiz{0%{-webkit-transform:translate(-50%,-50%) rotate(0deg);transform:translate(-50%,-50%) rotate(0deg)}to{-webkit-transform:translate(-50%,-50%) rotate(1turn);transform:translate(-50%,-50%) rotate(1turn)}}.imageLayer__1CUlw{position:absolute;left:50%;top:50%;z-index:10;border-radius:5px;will-change:transform}",""]),t.locals={loadingContainer:"loadingContainer__1uRry",fadeIn:"fadeIn__3hud5",loading:"loading__2ybtF",spin:"spin__34aiz",imageLayer:"imageLayer__1CUlw"}},"./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Wrapper/index.less":function(e,t,o){(t=e.exports=o("./node_modules/css-loader/lib/css-base.js")(!1)).push([e.i,".wrapperLayer__12HA6{position:fixed;top:0;left:0;right:0;bottom:0;z-index:999}",""]),t.locals={wrapperLayer:"wrapperLayer__12HA6"}},"./node_modules/css-loader/lib/css-base.js":function(e,t){e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var o=function(e,t){var o=e[1]||"",n=e[3];if(!n)return o;if(t&&"function"==typeof btoa){var r=function(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}(n),s=n.sources.map(function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"});return[o].concat(s).concat([r]).join("\n")}return[o].join("\n")}(t,e);return t[2]?"@media "+t[2]+"{"+o+"}":o}).join("")},t.i=function(e,o){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(n[s]=!0)}for(r=0;r<e.length;r++){var a=e[r];"number"==typeof a[0]&&n[a[0]]||(o&&!a[2]?a[2]=o:o&&(a[2]="("+a[2]+") and ("+o+")"),t.push(a))}},t}},"./node_modules/style-loader/lib/addStyles.js":function(e,t,o){var n={},r=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),s=function(e){var t={};return function(e){if(void 0===t[e]){var o=function(e){return document.querySelector(e)}.call(this,e);if(o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(e){o=null}t[e]=o}return t[e]}}(),a=null,i=0,l=[],c=o("./node_modules/style-loader/lib/urls.js");function u(e,t){for(var o=0;o<e.length;o++){var r=e[o],s=n[r.id];if(s){s.refs++;for(var a=0;a<s.parts.length;a++)s.parts[a](r.parts[a]);for(;a<r.parts.length;a++)s.parts.push(y(r.parts[a],t))}else{var i=[];for(a=0;a<r.parts.length;a++)i.push(y(r.parts[a],t));n[r.id]={id:r.id,refs:1,parts:i}}}}function d(e,t){for(var o=[],n={},r=0;r<e.length;r++){var s=e[r],a=t.base?s[0]+t.base:s[0],i={css:s[1],media:s[2],sourceMap:s[3]};n[a]?n[a].parts.push(i):o.push(n[a]={id:a,parts:[i]})}return o}function f(e,t){var o=s(e.insertInto);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?o.insertBefore(t,n.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),l.push(t);else if("bottom"===e.insertAt)o.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=s(e.insertInto+" "+e.insertAt.before);o.insertBefore(t,r)}}function p(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function m(e){var t=document.createElement("style");return e.attrs.type="text/css",h(t,e.attrs),f(e,t),t}function h(e,t){Object.keys(t).forEach(function(o){e.setAttribute(o,t[o])})}function y(e,t){var o,n,r,s;if(t.transform&&e.css){if(!(s=t.transform(e.css)))return function(){};e.css=s}if(t.singleton){var l=i++;o=a||(a=m(t)),n=g.bind(null,o,l,!1),r=g.bind(null,o,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=function(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",h(t,e.attrs),f(e,t),t}(t),n=function(e,t,o){var n=o.css,r=o.sourceMap,s=void 0===t.convertToAbsoluteUrls&&r;(t.convertToAbsoluteUrls||s)&&(n=c(n));r&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([n],{type:"text/css"}),i=e.href;e.href=URL.createObjectURL(a),i&&URL.revokeObjectURL(i)}.bind(null,o,t),r=function(){p(o),o.href&&URL.revokeObjectURL(o.href)}):(o=m(t),n=function(e,t){var o=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}.bind(null,o),r=function(){p(o)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=r()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var o=d(e,t);return u(o,t),function(e){for(var r=[],s=0;s<o.length;s++){var a=o[s];(i=n[a.id]).refs--,r.push(i)}e&&u(d(e,t),t);for(s=0;s<r.length;s++){var i;if(0===(i=r[s]).refs){for(var l=0;l<i.parts.length;l++)i.parts[l]();delete n[i.id]}}}};var b=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}();function g(e,t,o,n){var r=o?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var s=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(s,a[t]):e.appendChild(s)}}},"./node_modules/style-loader/lib/urls.js":function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var o=t.protocol+"//"+t.host,n=o+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var r,s=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(s)?e:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?o+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")})}},"./src/components/Background/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(o("react")),r=s(o("./src/components/Background/index.less"));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){var t=e.show,o=e.zoom,s=e.backdrop,a=e.unmountSelf,i=e.toggleZoom;return n.default.createElement("div",{className:r.default.backgroundLayer,onClick:o?i:a,style:{opacity:t?1:0,background:s||""}})}},"./src/components/Background/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Background/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/components/Control/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o("react"),s=c(r),a=o("react-motion"),i=c(o("./src/components/Control/index.less")),l=o("./src/utils/index.js");function c(e){return e&&e.__esModule?e:{default:e}}var u={over:20,rotate:45,opacity:0},d={over:0,rotate:0,opacity:1},f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.state={motionStyle:u},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),n(t,[{key:"componentWillReceiveProps",value:function(e){e.show?this.setState({motionStyle:d}):this.setState({motionStyle:u})}},{key:"render",value:function(){var e=this.props,t=e.zoom,o=e.page,n=e.set,c=e.mobile,u=e.controller,d=e.unmountSelf,f=e.toggleZoom,p=e.jumpPages,m=this.state.motionStyle;return s.default.createElement(a.Motion,{style:(0,l.springlization)({over:m.over,rotate:m.rotate,opacity:m.opacity})},function(e){var a=e.over,l=e.rotate,m=e.opacity;return s.default.createElement(r.Fragment,null,s.default.createElement("div",{className:i.default.controls},!t&&u.zoom&&s.default.createElement("div",{className:i.default.zoomButton,onClick:c?function(){return window.open(n[o].src)}:f,style:{opacity:m,transform:"rotate("+l+"deg)"}}),!t&&u.close&&s.default.createElement("div",{className:i.default.closeButton,onClick:t?f:d},s.default.createElement("div",{className:i.default.crossLine,style:{opacity:m,transform:"rotate("+(45-l)+"deg)"}}),s.default.createElement("div",{className:i.default.crossLine,style:{opacity:m,transform:"rotate("+-(45-l)+"deg)"}}))),n.length>1&&!t&&u.pagination&&s.default.createElement("div",{className:i.default.pages,style:{opacity:m,transform:"translate3d(-50%, "+a+"px, 0)"}},n.map(function(e,t){return t===o?s.default.createElement("span",{key:t,className:i.default.blackDot}):s.default.createElement("span",{key:t,className:i.default.whiteDot,onClick:function(){return p(t)}})})))})}}]),t}();t.default=f},"./src/components/Control/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Control/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/components/Image/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=o("react"),s=c(r),a=o("react-motion"),i=c(o("./src/components/Image/index.less")),l=o("./src/utils/index.js");function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));d.call(o),o.image=null,o.initialPageOffset=window.pageYOffset;var n=o.coverStyle(),r=n.x,s=n.y,a=n.opacity,i=n.scale;return o.state={defaultStyle:{x:r,y:s,opacity:a,scale:i},currentStyle:{x:r,y:s,opacity:a,scale:i}},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default.PureComponent),n(t,[{key:"componentDidMount",value:function(){(0,l.addListenEventOf)("resize",this.handleResize)}},{key:"componentWillReceiveProps",value:function(e){var t=e.set,o=e.show,n=e.zoom,r=e.page;this.updateImageInfo(t[r].src,o,n)}},{key:"componentWillUnmount",value:function(){(0,l.removeListenEventOf)("resize",this.handleResize)}},{key:"render",value:function(){var e=this,t=this.props,o=t.show,n=t.zoom,c=t.page,u=t.set,d=t.toggleZoom,f=this.state,p=f.defaultStyle,m=f.currentStyle;return s.default.createElement(r.Fragment,null,o&&s.default.createElement("div",{className:i.default.loadingContainer},s.default.createElement("div",{className:i.default.loading})),s.default.createElement(a.Motion,{defaultStyle:p,style:(0,l.springlization)({x:m.x,y:m.y,opacity:m.opacity,scale:m.scale}),onRest:this.handleMotionRest},function(t){var r=t.x,a=t.y,l=t.scale,f=o?0:e.initialPageOffset-window.pageYOffset;return s.default.createElement("img",{key:c,className:i.default.imageLayer,style:{transform:"translate3d(-50%, -50%, 0) translate3d("+r+"px, "+a+"px, 0px) translate3d(0px, "+f+"px, 0px) scale3d("+l+", "+l+", 1)",cursor:n?"zoom-out":"initial"},src:u[c].src,alt:u[c].alt,onClick:n?d:function(){},onError:function(){console.warn("react-zmage initialization error because the cover image url invalid."),e.handleMotionRest(!0)}})}))}}]),t}(),d=function(){var e=this;this.updateImageInfo=function(t,o,n){e.image&&t===e.image.src?e.updateImageStyle(o,n):(e.image=new Image,e.image.onload=function(){e.updateImageStyle(o,n)},e.image.src=t)},this.updateImageStyle=function(t,o){t?o?(e.setStyle(e.zoomingStyle()),(0,l.addListenEventOf)("mousemove",e.handleMouseMove)):(e.setStyle(e.browsingStyle()),(0,l.removeListenEventOf)("mousemove",e.handleMouseMove)):(e.setStyle(e.coverStyle()),(0,l.removeListenEventOf)("mousemove",e.handleMouseMove))},this.coverStyle=function(){var t=e.props,o=t.page,n=t.cover,r=n.width,s=n.height,a=n.naturalWidth,i=n.getBoundingClientRect(),c=i.top,u=i.left;return 0===o?{x:-(0,l.scrollWidth)()/2+u+r/2,y:-(0,l.windowHeight)()/2+c+s/2,opacity:1,scale:r/a}:{x:0,y:-(0,l.windowHeight)(),opacity:0,scale:r/a}},this.browsingStyle=function(){var t=e.props.margin;return{x:0,y:0,opacity:1,scale:(0,l.calcFitScale)(e.image,t)}},this.zoomingStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=t.clientX,n=void 0===o?(0,l.scrollWidth)()/2:o,r=t.clientY,s=void 0===r?(0,l.windowHeight)()/2:r,a=e.props.margin,i=e.image,c=i.naturalWidth,u=i.naturalHeight,d=(0,l.scrollWidth)(),f=(0,l.windowHeight)(),p=c-(0,l.scrollWidth)()+2*a,m=u-(0,l.windowHeight)()+2*a;return{x:c>d?(c-d)/2+a-p*(n/d):0,y:u>f?(u-f)/2+a-m*(s/f):0,opacity:1,scale:1}},this.handleMouseMove=function(t){e.setStyle(e.zoomingStyle(t))},this.handleResize=function(t){var o=e.props,n=o.show,r=o.zoom;e.updateImageStyle(n,r)},this.handleMotionRest=function(t){var o=e.props,n=o.cover,r=o.remove;e.props.show&&!t||(n.style.visibility="visible",r())},this.setStyle=function(t){var o=e.state.currentStyle,n=t.x,r=void 0===n?o.x:n,s=t.y,a=void 0===s?o.y:s,i=t.opacity,l=void 0===i?o.opacity:i,c=t.scale,u=void 0===c?o.opacity:c;e.setState({currentStyle:{x:r,y:a,opacity:l,scale:u}})}};t.default=u},"./src/components/Image/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Image/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/components/Portals/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=i(o("react")),s=i(o("react-dom")),a=o("./src/config/default.js");function i(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o.target=e.target||document.body,o.element=document.createElement("div"),o.element.id="zmage",o.element.style.zIndex=e.zIndex,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.Component),n(t,[{key:"componentDidMount",value:function(){this.target.appendChild(this.element)}},{key:"componentWillUnmount",value:function(){this.target.removeChild(this.element)}},{key:"render",value:function(){return s.default.createPortal(this.props.children,this.element)}}]),t}();t.default=l,l.defaultProps={zIndex:a.defProp.zIndex},l.propTypes={zIndex:a.defType.zIndex}},"./src/components/Wrapper/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=f(o("react")),s=f(o("prop-types")),a=f(o("./src/components/Wrapper/index.less")),i=f(o("./src/components/Control/index.js")),l=f(o("./src/components/Image/index.js")),c=f(o("./src/components/Background/index.js")),u=o("./src/config/default.js"),d=o("./src/utils/index.js");function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));o.mountSelf=function(){var e=o.props.cover;o.setState({show:!0},function(){e.style.visibility="hidden",(0,d.addListenEventOf)("scroll",o.handleScroll),(0,d.addListenEventOf)("keydown",o.handleKeyDown),(0,d.addListenEventOf)("touchmove",o.handleScroll)})},o.unmountSelf=function(){var e=o.props.cover;0!==o.state.page&&(e.style.visibility="visible"),o.setState({show:!1})},o.handleKeyDown=function(e){e.preventDefault();var t=o.props,n=t.set,r=t.hotKey,s=o.state.zoom,a=n&&n.constructor===Array,i=o.handleSwitchPages("prev"),l=o.handleSwitchPages("next");switch(e.key){case"ArrowLeft":!s&&r.flip&&a&&i();break;case"ArrowRight":!s&&r.flip&&a&&l();break;case" ":r.zoom&&o.handleToggleZoom();break;case"Escape":r.close&&(s?o.handleToggleZoom():o.unmountSelf());break;default:return}},o.handleScroll=function(){o.state.show&&o.unmountSelf()},o.handleJumpPages=function(e){o.setState({page:e})},o.handleSwitchPages=function(e){return function(){var t=o.props.set,n=o.state.page;o.setState({page:"prev"===e?Math.abs(t.length+n-1)%t.length:(n+1)%t.length})}},o.handleToggleZoom=function(){o.setState({zoom:!o.state.zoom})};var n=(0,d.mobileCheck)();return o.state={show:!1,zoom:!1,page:0,mobile:n,margin:n?0:e.margin},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default.PureComponent),n(t,[{key:"componentDidMount",value:function(){this.mountSelf()}},{key:"componentWillUnmount",value:function(){(0,d.removeListenEventOf)("scroll",this.handleScroll),(0,d.removeListenEventOf)("keydown",this.handleKeyDown),(0,d.removeListenEventOf)("touchmove",this.handleScroll)}},{key:"render",value:function(){var e=this.props,t=e.cover,o=e.set,n=e.controller,s=e.backdrop,u=e.remove,d=this.state,f=d.show,p=d.zoom,m=d.page,h=d.mobile,y=d.margin;return r.default.createElement("div",{className:a.default.wrapperLayer},r.default.createElement(c.default,{show:f,zoom:p,backdrop:s,unmountSelf:this.unmountSelf,toggleZoom:this.handleToggleZoom}),r.default.createElement(i.default,{set:o,show:f,zoom:p,page:m,mobile:h,controller:n,unmountSelf:this.unmountSelf,jumpPages:this.handleJumpPages,toggleZoom:this.handleToggleZoom}),r.default.createElement(l.default,{set:o,show:f,zoom:p,page:m,cover:t,mobile:h,remove:u,margin:y,toggleZoom:this.handleToggleZoom}))}}]),t}();t.default=p,p.defaultProps={cover:{},set:[],controller:u.defProp.controller,hotKey:u.defProp.hotKey,backdrop:u.defProp.backdrop,margin:u.defProp.margin,remove:function(){}},p.propTypes={cover:s.default.object,set:u.defType.set,controller:u.defType.controller,hotKey:u.defType.hotKey,backdrop:u.defType.backdrop,margin:u.defType.margin,remove:s.default.func}},"./src/components/Wrapper/index.less":function(e,t,o){var n=o("./node_modules/css-loader/index.js??ref--4-1!./node_modules/postcss-loader/lib/index.js??postcss!./node_modules/less-loader/dist/cjs.js!./src/components/Wrapper/index.less");"string"==typeof n&&(n=[[e.i,n,""]]);var r={hmr:!0,transform:void 0};o("./node_modules/style-loader/lib/addStyles.js")(n,r);n.locals&&(e.exports=n.locals)},"./src/config/default.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defType=t.defProp=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(o("prop-types"));t.defProp={controller:{pagination:!0,title:!0,close:!0,zoom:!0,flip:!0},hotKey:{close:!0,zoom:!0,flip:!0},backdrop:"#FFFFFF",zIndex:1e3,margin:70,springOption:{stiffness:200,damping:25,precision:.01}},t.defType={set:n.default.oneOfType([n.default.arrayOf(n.default.shape({src:n.default.string,alt:n.default.string,text:n.default.string})),n.default.shape({src:n.default.string,alt:n.default.string,text:n.default.string})]),controller:n.default.shape({pagination:n.default.bool,title:n.default.bool,close:n.default.bool,zoom:n.default.bool,flip:n.default.bool}),hotKey:n.default.shape({close:n.default.bool,zoom:n.default.bool,flip:n.default.bool}),backdrop:n.default.string,zIndex:n.default.number,margin:n.default.number,springOption:n.default.shape({stiffness:n.default.number,damping:n.default.number})}},"./src/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},r=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),s=o("react"),a=d(s),i=d(o("prop-types")),l=d(o("./src/components/Portals/index.js")),c=d(o("./src/components/Wrapper/index.js")),u=o("./src/config/default.js");function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return p.call(o),o.cover=null,o.state={browsing:!1,set:o.buildSet(e)},o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default.PureComponent),r(t,[{key:"render",value:function(){var e=this,t=this.state,o=t.browsing,r=t.set,i=this.props,d=i.className,f=i.src,p=i.alt,m=i.controller,h=i.hotKey,y=i.backdrop,b=i.zIndex,g=i.style,v=function(e,t){var o={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(o[n]=e[n]);return o}(i,["className","src","alt","controller","hotKey","backdrop","zIndex","style"]);return a.default.createElement(s.Fragment,null,a.default.createElement("img",n({ref:function(t){return e.cover=t},className:d,src:f,alt:p,title:p,style:n({cursor:"zoom-in"},g),onClick:this.browsing},v)),o&&a.default.createElement(l.default,{zIndex:b},a.default.createElement(c.default,{set:r,cover:this.cover,controller:n({},u.defProp.controller,m),hotKey:n({},u.defProp.hotKey,h),backdrop:y,remove:this.unBrowsing})))}}]),t}(),p=function(){var e=this;this.buildSet=function(e){var t=e.set,o=e.src,n=e.alt,r=e.txt;return t&&t.constructor===Array&&t.length>1?t:[{src:o,alt:n,txt:r}]},this.browsing=function(){var t=e.props.onClick;t&&t.constructor===Function&&t(),e.setState({browsing:!0})},this.unBrowsing=function(){e.setState({browsing:!1})}};t.default=f,f.defaultProps={src:"",alt:"",txt:"",set:[],controller:u.defProp.controller,hotKey:u.defProp.hotKey,backdrop:u.defProp.backdrop,zIndex:u.defProp.zIndex},f.propTypes={src:i.default.string.isRequired,alt:i.default.string,txt:i.default.string,set:u.defType.set,controller:u.defType.controller,hotKey:u.defType.hotKey,backdrop:u.defType.backdrop,zIndex:u.defType.zIndex}},"./src/utils/index.js":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.springlization=t.mobileCheck=t.clientHeight=t.scrollHeight=t.windowHeight=t.clientWidth=t.scrollWidth=t.windowWidth=t.removeListenEventOf=t.addListenEventOf=t.calcFitScale=void 0;var n=o("./src/config/default.js"),r=o("react-motion"),s=(t.calcFitScale=function(e,t){var o=s()/(e.naturalWidth+2*t),n=a()/(e.naturalHeight+2*t);return Math.min(o,n)},t.addListenEventOf=function(e,t){return window.addEventListener(e,t,!0)},t.removeListenEventOf=function(e,t){return window.removeEventListener(e,t,!0)},t.windowWidth=function(){return window.innerWidth},t.scrollWidth=function(){return document.body.scrollWidth},t.clientWidth=function(){return document.documentElement.clientWidth}),a=(t.windowHeight=function(){return window.innerHeight},t.scrollHeight=function(){return document.body.scrollHeight},t.clientHeight=function(){return document.documentElement.clientHeight});t.mobileCheck=function(){var e=!1,t=navigator.userAgent||navigator.vendor||window.opera;return(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e},t.springlization=function(e){var t={};for(var o in e)t[o]=(0,r.spring)(e[o],n.defProp.springOption);return t}},0:function(e,t,o){e.exports=o("./src/index.js")},"prop-types":function(e,t){e.exports=require("prop-types")},react:function(e,t){e.exports=require("react")},"react-dom":function(e,t){e.exports=require("react-dom")},"react-motion":function(e,t){e.exports=require("react-motion")}})});